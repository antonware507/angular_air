<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ng="http://angularjs.org" xml:lang="en" lang="en">
<head>
<script type="text/javascript" ng:autobind src="js/angular-0.9.19.min.js"></script>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta http-equiv="imagetoolbar" content="false" />
<meta name="mssmarttagspreventparsing" content="true" />
<link rel="stylesheet" type="text/css" media="all" href='css/jquery_air.css' />
<!--[if IE]>
<link rel="stylesheet" type="text/css" media="all" href='css/ie_fixes.css' />
<![endif]-->
<link rel="stylesheet" type="text/css" media="all" href='css/preset.css' />
<title>Angular Air</title>
<script type="text/javascript">
    function MyController() {
        this.seats = [];
        this.select_all = false;
		
		this.ref_data = {
		    meal_types : [ "Any", "Beef", "Chicken", "Fish", "Veggie" ]	
		};
 
		for (i=1; i<=25; i++) {
			this.seats.push({ row: i, posn: "A"});
			this.seats.push({ row: i, posn: "B"});
			this.seats.push({ row: i, posn: "C"});
			this.seats.push({ row: i, posn: "D"});
			this.seats.push({ row: i, posn: "E"});
			this.seats.push({ row: i, posn: "F"});
		}

        this.saveClicked = function() {
            alert("save not implemented yet");
        }

        this.selectedOrNot = function(seat) {
            return seat.selected || this.select_all ? "selected" : "";
        };



    }

</script>

</head>
<body ng:controller="MyController">
<div id="container">
	<img src="img/logo.gif" alt="jQuery Air" id="logo" />
	<span id="info">
		<strong>Charter Flight</strong><br />
		Passenger Management
	</span>
	<ul id="airplane">
		<li id="master">
			<input type="checkbox" id="check_all" name="select_all" />
			<label for="check_all">
				All
			</label>
		</li>
		<li ng:repeat="seat in seats" ng:class="'seat_' + seat.row + ' ' + seat.posn">
            <a ng:class="selectedOrNot(seat)"
               ng:init="seat.selected = false"
               ng:click="seat.selected = !seat.selected" ></a>
        </li>
	</ul>
		<table cellspacing="0" id="passenger_details">
			<thead>
				<tr>
					<th scope="col">
						Seat
					</th>
					<th scope="col">
						First name
					</th>
					<th scope="col">
						Last name
					</th>
					<th scope="col">
						Passport #
					</th>
					<th scope="col">
						Baggage
					</th>
					<th scope="col">
						Carry-ons
					</th>
					<th scope="col">
						Meal
					</th>
				</tr>
			</thead>
			<tbody>
				<tr ng:repeat="seat in seats" ng:show="seat.selected || select_all" ng:class="'seat_' + seat.row + ' ' + seat.posn">
					<td>
						<strong>{{seat.row + seat.posn}}</strong>
					</td>
					<td>
						<input type="text" name="seat.first_name"/>
					</td>
					<td>
						<input type="text" name="seat.last_name"/>
					</td>
					<td>
						<input type="text" name="seat.passport"/>
					</td>
					<td>
						<select name="seat.baggage">
							<option value="0" selected="selected">0</option>
							<option value="1">1</option>
							<option value="2">2</option>
						</select>
					</td>
					<td>
						<select name="seat.carry_ons">
							<option value="0" selected="selected">0</option>
							<option value="1">1</option>
							<option value="2">2</option>
						</select>
					</td>
					<td>
						<select name="seat.meal" ng:init="seat.meal = ref_data.meal_types[0]">
							<option ng:repeat="type in ref_data.meal_types" ng:model="type">{{type}}</option>
						</select>
					</td>
				</tr>
			</tbody>
		</table>
		<p>
			<input type="submit" value="Save" class="button" ng:click="saveClicked()" />
		</p>
	<p id="footer">
		Demo originally created for <a href="http://www.digital-web.com/articles/jquery_crash_course/">Digital Web Magazine</a> by <a href="http://sonspring.com/">Nathan Smith</a>, <br/>with mods from <a href="http://paulhammant.com/">Paul Hammant</a> (was using <a href="http://jquery.com">jQuery</a> is now using <a href="http://angularjs.org">Angular.js)</a>.
	</p>
    <h2>Debug View:</h2>
    <hr/>
    <strong>select_all</strong> = {{select_all}}
    <hr/>
    <strong>seatMap</strong> = {{seats}}
    <hr/>
</div>
</body>
</html>